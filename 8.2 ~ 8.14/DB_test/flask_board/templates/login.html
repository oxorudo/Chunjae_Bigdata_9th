{% extends "layout.html" %}
{% block body %}
<div>
    <h1>로그인하세요.</h1>
    <form action="{{url_for('login')}}" method="post">
        <input type="text" name='login_id'>
        <input type="password" name="login_password"> <!-- type을 password로 하면 자동으로 입력하는 비밀번호를 가려준다.-->
        <!-- submit 속성은 우리의 서버로 요청을 보내주는 역할인데, 하나의 폼 태그 안에 버튼이 하나면 자동으로 submit 역할을 하게 된다.(submit 생략 가능하다는 뜻)-->
        <button>로그인</button>
    </form>
    {% if error_message %}
        <h3>{{error_message}}</h3>
    {% endif %}
</div>
<script>
    const form = document.forms[0]
    console.log(form)
    
    form.addEventListener('submit', (event) => {
        event.preventDefault(); // 아무것도 입력하지 않고 로그인 버튼 눌렀을때 submit이 발생하여 화면이 이동하는 것을 막음

        const loginId = form['login_id'].value;
        const loginPassword = form['login_password'].value
        
        if(!loginId) {
            alert('아이디를 입력해주세요.');
            form['login_id'].focus();
            return;
        }

        if(!loginPassword) {
            alert('비밀번호를 입력해주세요.');
            form['login_password'].focus();
            return;
        }
        
        // 검증 후 실제로 로그인 로직이 동작하도록 한다.
        form.submit();
    })
</script>
{% endblock body %}